---
// Lightbox component - include once in your layout
// Listens for openLightbox events from gallery components
import { Icon } from 'astro-icon/components';
---

<div
  id="lightbox"
  class="fixed inset-0 z-50 hidden bg-black/95 backdrop-blur-sm"
  role="dialog"
  aria-modal="true"
  aria-label="Image lightbox"
>
  <!-- Close button -->
  <button
    id="lightbox-close"
    type="button"
    class="absolute top-4 right-4 z-10 p-2 text-white/80 hover:text-white transition-colors rounded-full hover:bg-white/10"
    aria-label="Close lightbox"
  >
    <Icon name="tabler:x" class="h-8 w-8" />
  </button>

  <!-- Navigation buttons -->
  <button
    id="lightbox-prev"
    type="button"
    class="absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 text-white/80 hover:text-white transition-colors rounded-full hover:bg-white/10"
    aria-label="Previous image"
  >
    <Icon name="tabler:chevron-left" class="h-10 w-10" />
  </button>

  <button
    id="lightbox-next"
    type="button"
    class="absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 text-white/80 hover:text-white transition-colors rounded-full hover:bg-white/10"
    aria-label="Next image"
  >
    <Icon name="tabler:chevron-right" class="h-10 w-10" />
  </button>

  <!-- Image container -->
  <div class="flex items-center justify-center w-full h-full p-16">
    <div class="relative max-w-full max-h-full">
      <!-- Loading spinner -->
      <div
        id="lightbox-loader"
        class="absolute inset-0 flex items-center justify-center"
      >
        <div
          class="w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin"
        >
        </div>
      </div>
      <img
        id="lightbox-image"
        src=""
        alt=""
        class="max-w-full max-h-[calc(100vh-8rem)] object-contain opacity-0 transition-opacity duration-300"
      />
    </div>
  </div>

  <!-- Caption -->
  <div
    id="lightbox-caption"
    class="absolute bottom-4 left-1/2 -translate-x-1/2 text-white/90 text-center max-w-xl px-4"
  >
    <p id="lightbox-description" class="text-lg"></p>
    <p id="lightbox-counter" class="text-sm text-white/60 mt-1"></p>
  </div>
</div>

<script src="../scripts/lightbox.ts"></script>
